<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" >

<!-- Head --------------------------------------------------------->

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="generator" content="pandoc"/>
	
	
	 <script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
 <meta name="viewport" content="width=device-width, initial-scale=1" />
 <link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
 <script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
 <script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
 <script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
 <script src="site_libs/navigation-1.1/tabsets.js"></script>
 <script src="site_libs/navigation-1.1/codefolding.js"></script> 

	
		<style type="text/css">
		code {
			white-space: pre;
		}
	</style>
	<style type="text/css">
		a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */  div.sourceCode {
			overflow-x: visible;
		}
		
	</style>

		<style type="text/css">
		pre:not([class]) {
			background-color: white;
		}
	</style>
	   	<style type="text/css">
		h1 {
			font-size: 34px;
		}

		h1.title {
			font-size: 38px;
		}

		h2 {
			font-size: 30px;
		}

		h3 {
			font-size: 24px;
		}

		h4 {
			font-size: 18px;
		}

		h5 {
			font-size: 16px;
		}

		h6 {
			font-size: 12px;
		}

		.table th:not([align]) {
			text-align: left;
		}

		
	</style>
	
		<link rel="stylesheet" href="css/custom.css" type="text/css" />  
    <!-- Latest maxdcn font-awesome and academicons -->
    <link rel="stylesheet" href="./css/font-awesome-4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./css/academicons-1.7.0/css/academicons.min.css">

    <!-- custom css -->
        <link rel="stylesheet" href="css/custom.css" type="text/css" />
	
    <!-- Include these sections here, otherwise YAML headings not inserted -->
    <!-- Google analytics -->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-71613331-1', 'auto');
        ga('send', 'pageview');
    </script>

    <!-- SEO -->
    <title>When your ‘golden years’ are not so golden</title>
    <meta name="description" content="Are we paying for our increasing longevity with extra years of poor health?">
    <link rel="author" href="https://plus.google.com/u/0/103355314187199079295" />
    <meta name="robots" content="robots.txt">
    <link rel="canonical" href="https://www.painblogr.org/2019-01-25-global-burden-of-disease.html">

    <!-- Twittercard -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@painblogR">
    <meta name="twitter:creator" content="@painblogR">
    <meta name="twitter:title" content="When your ‘golden years’ are not so golden">
    <meta name="twitter:description" content="Are we paying for our increasing longevity with extra years of poor health?">
    <meta name="twitter:image" content="<a href="https://www.painblogr.org/images/posts/2019-01-25-global-burden-of-disease/post-image.jpg" class="uri">https://www.painblogr.org/images/posts/2019-01-25-global-burden-of-disease/post-image.jpg</a>">
    <meta name="twitter:url" content="https://www.painblogr.org/2019-01-25-global-burden-of-disease.html">

    <!-- Opengraph -->
    <meta property="og:title" content="When your ‘golden years’ are not so golden">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.painblogr.org/2019-01-25-global-burden-of-disease.html">
    <meta property="og:image" content="<a href="https://www.painblogr.org/images/posts/2019-01-25-global-burden-of-disease/post-image.jpg" class="uri">https://www.painblogr.org/images/posts/2019-01-25-global-burden-of-disease/post-image.jpg</a>">
    <meta property="og:description" content="Are we paying for our increasing longevity with extra years of poor health?">
    <meta property="og:site_name" content="painblogR">
    <meta property="fb:app_id" content="621412384962188">
</head>

<!-- Body --------------------------------------------------------->

<body>
    <!-- Navigation bar -->
    <nav class="navbar navbar-fixed-top" role="navigation" , style="background-color:#FFFFFF;border-bottom: 1px solid #CCCCCC;">
        <div class="container-fluid" id="navfluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar-collapse" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <img src="images/capsaicin.png" alt="logo" , style="max-height:60px;padding-top:5px;">
                <span class="site-title"><a href="https://www.painblogr.org" style="color:#000000;font-size:250%;vertical-align:middle;">
				painblogR</a></span>&emsp;
            </div>

            <div class="collapse navbar-collapse" id="bs-navbar-collapse">
                <ul class="nav navbar-nav" style="display:table-row;padding-top:7px">
                    <li style="display:table-cell;float:none;vertical-align:middle;font-size:16px;"><a href="https://www.painblogr.org">Home</a></li>
                    <li style="display:table-cell;float:none;vertical-align:middle;font-size:16px;"><a href="./archive.html">Archive</a></li>
                    <li class="dropdown" style="display:table-cell;float:none;vertical-align:middle;font-size:16px;">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="./about_me.html">About me</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="./publications.html">Publications & Reprints </a></li>
                        </ul>
                    </li>
                    <li class="dropdown" style="display:table-cell;float:none;vertical-align:middle;font-size:16px;">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Teaching<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="https://www.painblogr.org/biostatistics/">Introduction to Biostatistics</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- /. nav-collapse -->
        </div>
        <!-- /. container-fluid -->
    </nav>

	<!-- Extras -->
		<style type = "text/css">
		code {
  			color: inherit;
  			background-color: rgba(0, 0, 0, 0.04);
		}
		img {
  			max-width:100%;
  			height: auto;
		}
		.tabbed-pane {
  			padding-top: 12px;
		}
		button.code-folding-btn:focus {
  			outline: none;
		}
	</style>

	<div class="container-fluid main-container">
		<!-- tabsets -->
		<script src="/tabsets.js"></script>
		<script>
			$(document).ready(function () {
  			window.buildTabsets("TOC");
			});
		</script>

		<!-- code folding -->
				<style type="text/css">
			code-folding-btn { margin-bottom: 4px; }
		</style>
		<script src="/codefolding.js"></script>
					<script>

		$(document).ready(function () {
			
			  			window.initializeCodeFolding("hide" === "show");
					});
		</script>
		
		<div class="fluid-row" id="header">
<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>

    <!-- Main text --->
    <div class="container-fluid" id="mainbody">
         
        <h1>When your ‘golden years’ are not so golden</h1> 
        <h4>Peter Kamerman</h4> 
        <em>25 January 2019</em> <style>
#img_center60 {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 60%
}

#img_center80 {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 80%
}
</style>
<p><br></p>
<div id="background" class="section level2">
<h2>Background</h2>
<p>A recent article in <em>The Lancet</em><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> reported that the increase in life expectancy that has occurred over the past 28 years (1990 to 2017) is associated with a disproportionate relative increase in time spent in poor health compared to good health. The authors reached this conclusion after analysing data on <em>total life expectancy</em> and <em>healthy life expectancy (HALE; years of good health)</em> from the Global Burden of Diseases, Injuries, and Risk Factors Study 2017 (GBD 2017). The GBD Study, assesses mortality and disability based on 359 causes of death and disability across 195 countries and territories (GBD data are freely available for download from the <a href="http://ghdx.healthdata.org/gbd-2017">Global Burden of Disease Exchange</a>).</p>
<p>The figure below is taken directly from the article in <em>The Lancet</em> and shows <em>years of good health</em> and <em>years of poor health</em> (<em>total life expectancy</em> - <em>years of good health</em>) for females (<span style="color:#ED0000FF;">red lines</span>) and males (<span style="color:#00468BFF;">blue lines</span>) across socio-demographic index quintiles (High SDI, High-middle SDI, Middle SDI, Middle-low SDI, Low SDI).</p>
<div style="margin-left:auto;margin-right:auto;width:98%;">
<p><img src='images/posts/2019-01-25-global-burden-of-disease/GBD_fig_1.png'></p>
</div>
<p>The figure shows an upward trend in <em>years of good health</em> and <em>years of poor health</em> over the past 28 years, for males and females across the five socio-demographic quintiles. But, it is hard to discern from the plot whether the rate of increase in <em>years of poor health</em> is greater than the rate of increase in <em>years of good health</em>, even though this was a key finding of the research. That is, the figure does not accomplish the reason for having a plot, which is to provide a visual aid for interpreting the findings.</p>
<p>So I decided to play with the data myself to see if I could generate more informative plots.</p>
<p>I approached this task by:</p>
<ol style="list-style-type: decimal">
<li><p>Recapitulating the plot from the article, but with an extra panel showing <em>total life expectancy</em>. I decided on this plot because I wanted to confirm that I had downloaded the correct data, and I felt that the <em>total life expectancy</em> panel would help contextualize changes in <em>years of good health</em> and <em>years of poor health</em> data; and by</p></li>
<li><p>Comparing the cumulative year-over-year percent change in <em>years of poor health</em> and <em>years of good health</em> since 1990. I felt that using the cumulative year-over-year change would allow direct comparison of the long-term trends of two variables measured on the same scale (years), but which have vastly different magnitudes (<em>years of good health</em> contributes 80 to 90% of <em>total life expectancy</em>). As an bonus, I decided to animate these plots to get a feel for the new <a href="https://github.com/thomasp85/gganimate"><code>gganimate</code></a> API.</p></li>
</ol>
<hr />
</div>
<div id="download-import-and-clean-data" class="section level2">
<h2>Download, import, and clean data</h2>
<p>First I had to get and clean the data.</p>
<p>I manually downloaded the data from the Global Burden of Disease Exchange website using their <a href="http://ghdx.healthdata.org/gbd-results-tool">query tool</a> (as far as I know, the site does not have an API to remotely query and retrieve data). I then imported the two <em>*.csv</em> files I had downloaded (one for <em>years of good health</em>, and one for <em>total life expectancy</em>), and performed a cursory inspection and a basic clean-up of the data, the code and outputs of which are shown below.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">#                       Import data                        #</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co"># years of good health</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">hale &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;_data/2019-01-25-global-burden-of-disease/hale-1990-2017.csv&#39;</span>) </a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co"># Life expectancy</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">life &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;_data/2019-01-25-global-burden-of-disease/life-expectancy-1990-2017.csv&#39;</span>)</a>
<a class="sourceLine" id="cb1-10" data-line-number="10"></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#                       Inspect data                       #</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="kw">skim</span>(hale)</a></code></pre></div>
<pre><code>## Skim summary statistics
##  n obs: 280 
##  n variables: 9 
## 
## ── Variable type:character ─────────────────────────────────────────────────────────────────
##  variable missing complete   n min max empty n_unique
##       age       0      280 280   7   7     0        1
##  location       0      280 280   7  15     0        5
##   measure       0      280 280  30  30     0        1
##    metric       0      280 280   5   5     0        1
##       sex       0      280 280   4   6     0        2
## 
## ── Variable type:numeric ───────────────────────────────────────────────────────────────────
##  variable missing   n    mean   sd     p25     p50     p75     hist
##     lower       0 280   57.48 6.44   51.94   58.66   62.78 ▃▃▇▅▆▇▇▆
##     upper       0 280   62.29 6.91   56.46   62.82   67.82 ▃▃▆▅▆▇▇▅
##       val       0 280   60.04 6.72   54.15   60.85   65.5  ▃▃▆▅▆▇▇▅
##      year       0 280 2003.5  8.09 1996.75 2003.5  2010.25 ▇▆▇▆▆▇▆▇</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">skim</span>(life)</a></code></pre></div>
<pre><code>## Skim summary statistics
##  n obs: 280 
##  n variables: 9 
## 
## ── Variable type:character ─────────────────────────────────────────────────────────────────
##  variable missing complete   n min max empty n_unique
##       age       0      280 280   7   7     0        1
##  location       0      280 280   7  15     0        5
##   measure       0      280 280  15  15     0        1
##    metric       0      280 280   5   5     0        1
##       sex       0      280 280   4   6     0        2
## 
## ── Variable type:numeric ───────────────────────────────────────────────────────────────────
##  variable missing   n    mean   sd     p25     p50     p75     hist
##     lower       0 280   68.88 7.87   62.6    68.93   75.15 ▃▅▇▇▇▇▆▅
##     upper       0 280   69.45 7.58   63.38   69.59   75.46 ▂▅▆▇▆▇▆▃
##       val       0 280   69.17 7.72   62.98   69.18   75.33 ▃▅▆▇▆▇▆▃
##      year       0 280 2003.5  8.09 1996.75 2003.5  2010.25 ▇▆▇▆▆▇▆▇</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#                        Clean data                        #</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">data &lt;-<span class="st"> </span>life <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="st">    </span><span class="co"># Join imported datasets</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="st">    </span><span class="kw">bind_rows</span>(hale) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="st">    </span><span class="co"># Select required columns</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="st">    </span><span class="kw">select</span>(measure, location, sex, year, metric, val) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="st">    </span><span class="co"># Recode measure category labels</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">measure =</span> <span class="kw">str_replace_all</span>(measure,</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">                                     <span class="dt">pattern =</span> <span class="st">&#39;HALE </span><span class="ch">\\</span><span class="st">(Healthy life expectancy</span><span class="ch">\\</span><span class="st">)&#39;</span>,</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">                                     <span class="dt">replacement =</span> <span class="st">&#39;Years of good health&#39;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">measure =</span> <span class="kw">str_replace_all</span>(measure,</a>
<a class="sourceLine" id="cb5-16" data-line-number="16">                                     <span class="dt">pattern =</span> <span class="st">&#39;Life expectancy&#39;</span>,</a>
<a class="sourceLine" id="cb5-17" data-line-number="17">                                     <span class="dt">replacement =</span> <span class="st">&#39;Total life expectancy&#39;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="st">    </span><span class="co"># Order location variable (socio-demographic quintile)</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">location =</span> <span class="kw">factor</span>(location,</a>
<a class="sourceLine" id="cb5-20" data-line-number="20">                             <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&#39;High SDI&#39;</span>, <span class="st">&#39;High-middle SDI&#39;</span>,</a>
<a class="sourceLine" id="cb5-21" data-line-number="21">                                        <span class="st">&#39;Middle SDI&#39;</span>, <span class="st">&#39;Low-middle SDI&#39;</span>,</a>
<a class="sourceLine" id="cb5-22" data-line-number="22">                                        <span class="st">&#39;Low SDI&#39;</span>),</a>
<a class="sourceLine" id="cb5-23" data-line-number="23">                             <span class="dt">ordered =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb5-24" data-line-number="24"></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co"># Inspect cleaned data</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="kw">glimpse</span>(data)</a></code></pre></div>
<pre><code>## Observations: 560
## Variables: 6
## $ measure  &lt;chr&gt; &quot;Total life expectancy&quot;, &quot;Total life expectancy&quot;, &quot;Tota…
## $ location &lt;ord&gt; High-middle SDI, High-middle SDI, High SDI, High SDI, L…
## $ sex      &lt;chr&gt; &quot;Male&quot;, &quot;Female&quot;, &quot;Male&quot;, &quot;Female&quot;, &quot;Male&quot;, &quot;Female&quot;, &quot;…
## $ year     &lt;dbl&gt; 2015, 2015, 2015, 2015, 2015, 2015, 2015, 2015, 2016, 2…
## $ metric   &lt;chr&gt; &quot;Years&quot;, &quot;Years&quot;, &quot;Years&quot;, &quot;Years&quot;, &quot;Years&quot;, &quot;Years&quot;, &quot;…
## $ val      &lt;dbl&gt; 72.65688, 78.81469, 78.39470, 83.60049, 65.61743, 69.43…</code></pre>
<p>The data looked in good order, and only needed some minor cleaning.</p>
<hr />
</div>
<div id="analysis" class="section level2">
<h2>Analysis</h2>
<div id="step-1" class="section level4">
<h4>Step 1</h4>
<p><strong>Recapitulate the plot from the article, but with an extra panel showing <em>total life expectancy</em>.</strong></p>
<p>I used the cleaned data to calculate the <em>years of poor health</em><a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>, and then generated separate plots for <em>total life expectancy</em>, <em>years of good health</em>, and <em>years of poor health</em>. For each plot, I presented the data by sex and socio-demographic index quintile.</p>
<p>Finally, I pieced the individual plots together and formated the visual look using <code>html/css</code> (after bumping my head repeatedly against a brick wall trying to get the desired look using the <code>patchwork</code> and <code>cowplot</code> packages; my usual go to packages for multiplots).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#        Calculate years of poor health since birth        #</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">delta &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="st">    </span><span class="co"># Spread the measure column</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="st">    </span><span class="kw">spread</span>(<span class="dt">key =</span> measure, </a>
<a class="sourceLine" id="cb7-9" data-line-number="9">           <span class="dt">value =</span> val) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="st">    </span><span class="co"># Calculate years unhealthy </span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="st">    </span><span class="kw">mutate</span>(<span class="st">`</span><span class="dt">Years of poor health</span><span class="st">`</span> =<span class="st"> `</span><span class="dt">Total life expectancy</span><span class="st">`</span> <span class="op">-</span><span class="st"> `</span><span class="dt">Years of good health</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="st">    </span><span class="co"># Gather measures again</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="st">    </span><span class="kw">gather</span>(<span class="dt">key =</span> measure, </a>
<a class="sourceLine" id="cb7-14" data-line-number="14">           <span class="dt">value =</span> val,</a>
<a class="sourceLine" id="cb7-15" data-line-number="15">           <span class="op">-</span>location, <span class="op">-</span>sex, <span class="op">-</span>year, <span class="op">-</span>metric)</a>
<a class="sourceLine" id="cb7-16" data-line-number="16"></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#                           Plot                           #</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co"># Generate separate plots for each &#39;measure&#39;, and save the outputs.</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="co">## Total life expectancy</span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25">le &lt;-<span class="st"> </span>delta <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="st">    </span><span class="kw">filter</span>(measure <span class="op">==</span><span class="st"> &#39;Total life expectancy&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="st">    </span><span class="kw">ggplot</span>(<span class="dt">data =</span> .) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="st">    </span><span class="kw">aes</span>(<span class="dt">x =</span> year,</a>
<a class="sourceLine" id="cb7-29" data-line-number="29">        <span class="dt">y =</span> val,</a>
<a class="sourceLine" id="cb7-30" data-line-number="30">        <span class="dt">colour =</span> sex) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32"><span class="st">    </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1990</span>, <span class="dv">1995</span>, <span class="dv">2000</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2017</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-33" data-line-number="33"><span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>),</a>
<a class="sourceLine" id="cb7-34" data-line-number="34">                       <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">85</span>),</a>
<a class="sourceLine" id="cb7-35" data-line-number="35">                       <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-36" data-line-number="36"><span class="st">    </span><span class="kw">scale_colour_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&#39;#ED0000&#39;</span>, <span class="st">&#39;#00468B&#39;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-37" data-line-number="37"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&#39;Total life expectancy at birth&#39;</span>,</a>
<a class="sourceLine" id="cb7-38" data-line-number="38">         <span class="dt">y =</span> <span class="st">&#39;Years of life&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-39" data-line-number="39"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>location, </a>
<a class="sourceLine" id="cb7-40" data-line-number="40">               <span class="dt">ncol =</span> <span class="dv">5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-41" data-line-number="41"><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_size =</span> <span class="dv">12</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-42" data-line-number="42"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb7-43" data-line-number="43">          <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="fl">0.99</span>, <span class="fl">0.985</span>),</a>
<a class="sourceLine" id="cb7-44" data-line-number="44">          <span class="dt">legend.justification =</span> <span class="kw">c</span>(<span class="fl">0.99</span>, <span class="fl">0.985</span>),</a>
<a class="sourceLine" id="cb7-45" data-line-number="45">          <span class="dt">legend.margin =</span> <span class="kw">margin</span>(<span class="dt">t =</span> <span class="dv">0</span>, <span class="dt">r =</span> <span class="dv">0</span>, <span class="dt">b =</span> <span class="dv">0</span>, <span class="dt">l =</span> <span class="dv">0</span>, <span class="dt">unit =</span> <span class="st">&#39;lines&#39;</span>),</a>
<a class="sourceLine" id="cb7-46" data-line-number="46">          <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">face =</span> <span class="st">&#39;bold&#39;</span>),</a>
<a class="sourceLine" id="cb7-47" data-line-number="47">          <span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb7-48" data-line-number="48">          <span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb7-49" data-line-number="49">          <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb7-50" data-line-number="50">          <span class="dt">strip.background =</span> <span class="kw">element_blank</span>()) </a>
<a class="sourceLine" id="cb7-51" data-line-number="51"></a>
<a class="sourceLine" id="cb7-52" data-line-number="52"><span class="kw">ggsave</span>(<span class="dt">filename =</span> <span class="st">&#39;le.png&#39;</span>,</a>
<a class="sourceLine" id="cb7-53" data-line-number="53">       <span class="dt">plot =</span> le, </a>
<a class="sourceLine" id="cb7-54" data-line-number="54">       <span class="dt">path =</span> <span class="st">&#39;./images/posts/2019-01-25-global-burden-of-disease&#39;</span>, </a>
<a class="sourceLine" id="cb7-55" data-line-number="55">       <span class="dt">width =</span> <span class="dv">8</span>,</a>
<a class="sourceLine" id="cb7-56" data-line-number="56">       <span class="dt">height =</span> <span class="fl">2.2</span>,</a>
<a class="sourceLine" id="cb7-57" data-line-number="57">       <span class="dt">units =</span> <span class="st">&#39;in&#39;</span>)</a>
<a class="sourceLine" id="cb7-58" data-line-number="58"></a>
<a class="sourceLine" id="cb7-59" data-line-number="59"><span class="co">## Years of good health</span></a>
<a class="sourceLine" id="cb7-60" data-line-number="60">healthy &lt;-<span class="st"> </span>delta <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-61" data-line-number="61"><span class="st">    </span><span class="kw">filter</span>(measure <span class="op">==</span><span class="st"> &#39;Years of good health&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-62" data-line-number="62"><span class="st">    </span><span class="kw">ggplot</span>(<span class="dt">data =</span> .) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-63" data-line-number="63"><span class="st">    </span><span class="kw">aes</span>(<span class="dt">x =</span> year,</a>
<a class="sourceLine" id="cb7-64" data-line-number="64">        <span class="dt">y =</span> val,</a>
<a class="sourceLine" id="cb7-65" data-line-number="65">        <span class="dt">colour =</span> sex) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-66" data-line-number="66"><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-67" data-line-number="67"><span class="st">    </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1990</span>, <span class="dv">1995</span>, <span class="dv">2000</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2017</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-68" data-line-number="68"><span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>),</a>
<a class="sourceLine" id="cb7-69" data-line-number="69">                       <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">40</span>, <span class="dv">75</span>),</a>
<a class="sourceLine" id="cb7-70" data-line-number="70">                       <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-71" data-line-number="71"><span class="st">    </span><span class="kw">scale_colour_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&#39;#ED0000&#39;</span>, <span class="st">&#39;#00468B&#39;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-72" data-line-number="72"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&#39;Years of good health at birth&#39;</span>,</a>
<a class="sourceLine" id="cb7-73" data-line-number="73">         <span class="dt">y =</span> <span class="st">&#39;Years of life&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-74" data-line-number="74"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>location, </a>
<a class="sourceLine" id="cb7-75" data-line-number="75">               <span class="dt">ncol =</span> <span class="dv">5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-76" data-line-number="76"><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_size =</span> <span class="dv">12</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-77" data-line-number="77"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&#39;none&#39;</span>,</a>
<a class="sourceLine" id="cb7-78" data-line-number="78">          <span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb7-79" data-line-number="79">          <span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb7-80" data-line-number="80">          <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">face =</span> <span class="st">&#39;bold&#39;</span>),</a>
<a class="sourceLine" id="cb7-81" data-line-number="81">          <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb7-82" data-line-number="82">          <span class="dt">strip.background =</span> <span class="kw">element_blank</span>()) </a>
<a class="sourceLine" id="cb7-83" data-line-number="83"></a>
<a class="sourceLine" id="cb7-84" data-line-number="84"><span class="kw">ggsave</span>(<span class="dt">filename =</span> <span class="st">&#39;healthy.png&#39;</span>,</a>
<a class="sourceLine" id="cb7-85" data-line-number="85">       <span class="dt">plot =</span> healthy, </a>
<a class="sourceLine" id="cb7-86" data-line-number="86">       <span class="dt">path =</span> <span class="st">&#39;./images/posts/2019-01-25-global-burden-of-disease&#39;</span>, </a>
<a class="sourceLine" id="cb7-87" data-line-number="87">       <span class="dt">width =</span> <span class="dv">8</span>,</a>
<a class="sourceLine" id="cb7-88" data-line-number="88">       <span class="dt">height =</span> <span class="fl">2.2</span>,</a>
<a class="sourceLine" id="cb7-89" data-line-number="89">       <span class="dt">units =</span> <span class="st">&#39;in&#39;</span>)</a>
<a class="sourceLine" id="cb7-90" data-line-number="90"></a>
<a class="sourceLine" id="cb7-91" data-line-number="91"><span class="co">## Poor health</span></a>
<a class="sourceLine" id="cb7-92" data-line-number="92">unhealthy &lt;-<span class="st"> </span>delta <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-93" data-line-number="93"><span class="st">    </span><span class="kw">filter</span>(measure <span class="op">==</span><span class="st"> &#39;Years of poor health&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-94" data-line-number="94"><span class="st">    </span><span class="kw">ggplot</span>(<span class="dt">data =</span> .) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-95" data-line-number="95"><span class="st">    </span><span class="kw">aes</span>(<span class="dt">x =</span> year,</a>
<a class="sourceLine" id="cb7-96" data-line-number="96">        <span class="dt">y =</span> val,</a>
<a class="sourceLine" id="cb7-97" data-line-number="97">        <span class="dt">colour =</span> sex) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-98" data-line-number="98"><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-99" data-line-number="99"><span class="st">    </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1990</span>, <span class="dv">1995</span>, <span class="dv">2000</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2017</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-100" data-line-number="100"><span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>),</a>
<a class="sourceLine" id="cb7-101" data-line-number="101">                       <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">13</span>),</a>
<a class="sourceLine" id="cb7-102" data-line-number="102">                       <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-103" data-line-number="103"><span class="st">    </span><span class="kw">scale_colour_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&#39;#ED0000&#39;</span>, <span class="st">&#39;#00468B&#39;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-104" data-line-number="104"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&#39;Years of poor health at birth&#39;</span>,</a>
<a class="sourceLine" id="cb7-105" data-line-number="105">         <span class="dt">x =</span> <span class="st">&#39;Year&#39;</span>,</a>
<a class="sourceLine" id="cb7-106" data-line-number="106">         <span class="dt">y =</span> <span class="st">&#39;Years of life&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-107" data-line-number="107"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>location, </a>
<a class="sourceLine" id="cb7-108" data-line-number="108">               <span class="dt">ncol =</span> <span class="dv">5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-109" data-line-number="109"><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_size =</span> <span class="dv">12</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-110" data-line-number="110"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&#39;none&#39;</span>,</a>
<a class="sourceLine" id="cb7-111" data-line-number="111">          <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">face =</span> <span class="st">&#39;bold&#39;</span>),</a>
<a class="sourceLine" id="cb7-112" data-line-number="112">          <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>,</a>
<a class="sourceLine" id="cb7-113" data-line-number="113">                                     <span class="dt">hjust =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb7-114" data-line-number="114">                                     <span class="dt">vjust =</span> <span class="fl">1.1</span>),</a>
<a class="sourceLine" id="cb7-115" data-line-number="115">          <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb7-116" data-line-number="116">          <span class="dt">strip.background =</span> <span class="kw">element_blank</span>()) </a>
<a class="sourceLine" id="cb7-117" data-line-number="117"></a>
<a class="sourceLine" id="cb7-118" data-line-number="118"><span class="kw">ggsave</span>(<span class="dt">filename =</span> <span class="st">&#39;unhealthy.png&#39;</span>,</a>
<a class="sourceLine" id="cb7-119" data-line-number="119">       <span class="dt">plot =</span> unhealthy, </a>
<a class="sourceLine" id="cb7-120" data-line-number="120">       <span class="dt">path =</span> <span class="st">&#39;./images/posts/2019-01-25-global-burden-of-disease&#39;</span>, </a>
<a class="sourceLine" id="cb7-121" data-line-number="121">       <span class="dt">width =</span> <span class="dv">8</span>,</a>
<a class="sourceLine" id="cb7-122" data-line-number="122">       <span class="dt">height =</span> <span class="fl">2.75</span>,</a>
<a class="sourceLine" id="cb7-123" data-line-number="123">       <span class="dt">units =</span> <span class="st">&#39;in&#39;</span>)</a></code></pre></div>
<div>
<div style="margin-left:auto;margin-right:auto;width:98%;">
<div style="border-width:thin;border-style:solid;border-color:#E29EA7;">
<p><img src='images/posts/2019-01-25-global-burden-of-disease/le.png'> <img src='images/posts/2019-01-25-global-burden-of-disease/healthy.png'> <img src='images/posts/2019-01-25-global-burden-of-disease/unhealthy.png'></p>
</div>
<p style="font-size:90%;font-style:italic;">
<b>Revised figure 1: Trends of total life expectancy at birth, years of good health at birth, and years of poor health at birth by SDI quintile and sex, 1990-2017.</b><br> SDI=Socio-demographic index
</p>
</div>
</div>
<p>Comparing my figure to the figure from the article, I was satisfied that I had reproduced the original figure (but with a <em>total life expectancy</em> panel). From <strong>Revised figure 1</strong>, it is clear that <em>total life expectancy</em>, <em>years of good health</em>, and <em>years of poor health</em> increased over time for both sexes, and across all socio-demographic quintiles. Although the trend curves for males and females are roughly parallel for all three measures (with the curves for females shifted upwards relative to those of their male counterparts), there is a progressive reduction in the magnitude of this male/female difference as you move from High SDI countries to Low SDI countries, particularly for <em>total life expectancy</em> and <em>years of good health</em>.</p>
<p>I feel that presenting <em>total life expectancy</em> data in the figure added value. For example, with the addition of <em>total life expectancy</em> data, it is apparent that in Low SDI countries, <em>total life expectancy</em> has consistently been slightly greater in females than in males, yet <em>years of good health</em> in males and females over the same time-period is almost identical. So, the marginally greater <em>total life expectancy</em> in females must reflect more <em>years of poor health</em> compared to males.</p>
</div>
<div id="step-2" class="section level3">
<h3>Step 2</h3>
<p><strong>Compare cumulative year-over-year percent change in <em>years of poor health</em> and <em>years of good health</em> for the past 28 years.</strong></p>
<p>There were several ways I could have analysed and plotted these data. For example, I could have used: sequential year-over-year percent change data, mean-centered data, or the yearly absolute difference between <em>years of good health</em> and <em>years of poor health</em>. But I chose to use cumulative year-over-year percent change because I felt it was the best option for presenting the data. As a relative measure, it corrects for the very large absolute difference between <em>years of good health</em> and <em>years of poor health</em> (~ 38 to 57 years in 1990, depending on SDI quintile and sex), and allows the assessment of the cumulative effect the yearly fluctuations in <em>years of good health</em> and <em>years of poor health</em>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#           Plot animated versions of the total            #</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#        life expectancy data for males and females        #</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co"># Males</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8">le_male &lt;-<span class="st"> </span>delta <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="st">    </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &#39;Male&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="st">    </span><span class="kw">filter</span>(measure <span class="op">==</span><span class="st"> &#39;Total life expectancy&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="st">    </span><span class="kw">ggplot</span>(<span class="dt">data =</span> .) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="st">    </span><span class="kw">aes</span>(<span class="dt">x =</span> year,</a>
<a class="sourceLine" id="cb8-13" data-line-number="13">        <span class="dt">y =</span> val) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">colour =</span> <span class="st">&#39;#00468B&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="st">    </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1990</span>, <span class="dv">1995</span>, <span class="dv">2000</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2017</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>),</a>
<a class="sourceLine" id="cb8-17" data-line-number="17">                       <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">85</span>),</a>
<a class="sourceLine" id="cb8-18" data-line-number="18">                       <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-19" data-line-number="19"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&#39;Total life expectancy at birth&#39;</span>,</a>
<a class="sourceLine" id="cb8-20" data-line-number="20">         <span class="dt">y =</span> <span class="st">&#39;Years of life&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-21" data-line-number="21"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>location, </a>
<a class="sourceLine" id="cb8-22" data-line-number="22">               <span class="dt">ncol =</span> <span class="dv">5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_size =</span> <span class="dv">12</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-25" data-line-number="25">          <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="fl">0.99</span>, <span class="fl">0.985</span>),</a>
<a class="sourceLine" id="cb8-26" data-line-number="26">          <span class="dt">legend.justification =</span> <span class="kw">c</span>(<span class="fl">0.99</span>, <span class="fl">0.985</span>),</a>
<a class="sourceLine" id="cb8-27" data-line-number="27">          <span class="dt">legend.margin =</span> <span class="kw">margin</span>(<span class="dt">t =</span> <span class="dv">0</span>, <span class="dt">r =</span> <span class="dv">0</span>, <span class="dt">b =</span> <span class="dv">0</span>, <span class="dt">l =</span> <span class="dv">0</span>, <span class="dt">unit =</span> <span class="st">&#39;lines&#39;</span>),</a>
<a class="sourceLine" id="cb8-28" data-line-number="28">          <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">face =</span> <span class="st">&#39;bold&#39;</span>),</a>
<a class="sourceLine" id="cb8-29" data-line-number="29">          <span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-30" data-line-number="30">          <span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-31" data-line-number="31">          <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-32" data-line-number="32">          <span class="dt">strip.background =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-33" data-line-number="33"><span class="st">    </span><span class="kw">transition_reveal</span>(year)</a>
<a class="sourceLine" id="cb8-34" data-line-number="34"></a>
<a class="sourceLine" id="cb8-35" data-line-number="35">le_male &lt;-<span class="st"> </span><span class="kw">animate</span>(<span class="dt">plot =</span> le_male, </a>
<a class="sourceLine" id="cb8-36" data-line-number="36">                   <span class="dt">fps =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb8-37" data-line-number="37">                   <span class="dt">nframes =</span> <span class="dv">150</span>,</a>
<a class="sourceLine" id="cb8-38" data-line-number="38">                   <span class="dt">duration =</span> <span class="dv">15</span>,</a>
<a class="sourceLine" id="cb8-39" data-line-number="39">                   <span class="dt">end_pause =</span> <span class="dv">50</span>,</a>
<a class="sourceLine" id="cb8-40" data-line-number="40">                   <span class="dt">res =</span> <span class="dv">150</span>,</a>
<a class="sourceLine" id="cb8-41" data-line-number="41">                   <span class="dt">width =</span> <span class="dv">8</span>,</a>
<a class="sourceLine" id="cb8-42" data-line-number="42">                   <span class="dt">height =</span> <span class="fl">2.2</span>,</a>
<a class="sourceLine" id="cb8-43" data-line-number="43">                   <span class="dt">units =</span> <span class="st">&#39;in&#39;</span>)</a>
<a class="sourceLine" id="cb8-44" data-line-number="44"></a>
<a class="sourceLine" id="cb8-45" data-line-number="45"><span class="kw">anim_save</span>(<span class="dt">filename =</span> <span class="st">&#39;le_male.gif&#39;</span>,</a>
<a class="sourceLine" id="cb8-46" data-line-number="46">          <span class="dt">animation =</span> le_male,</a>
<a class="sourceLine" id="cb8-47" data-line-number="47">          <span class="dt">path =</span> <span class="st">&#39;./images/posts/2019-01-25-global-burden-of-disease&#39;</span>)</a>
<a class="sourceLine" id="cb8-48" data-line-number="48"></a>
<a class="sourceLine" id="cb8-49" data-line-number="49"><span class="co"># Females</span></a>
<a class="sourceLine" id="cb8-50" data-line-number="50">le_female &lt;-<span class="st"> </span>delta <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-51" data-line-number="51"><span class="st">    </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &#39;Female&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-52" data-line-number="52"><span class="st">    </span><span class="kw">filter</span>(measure <span class="op">==</span><span class="st"> &#39;Total life expectancy&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-53" data-line-number="53"><span class="st">    </span><span class="kw">ggplot</span>(<span class="dt">data =</span> .) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-54" data-line-number="54"><span class="st">    </span><span class="kw">aes</span>(<span class="dt">x =</span> year,</a>
<a class="sourceLine" id="cb8-55" data-line-number="55">        <span class="dt">y =</span> val) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-56" data-line-number="56"><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">colour =</span> <span class="st">&#39;#ED0000&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-57" data-line-number="57"><span class="st">    </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1990</span>, <span class="dv">1995</span>, <span class="dv">2000</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2017</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-58" data-line-number="58"><span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>),</a>
<a class="sourceLine" id="cb8-59" data-line-number="59">                       <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">85</span>),</a>
<a class="sourceLine" id="cb8-60" data-line-number="60">                       <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-61" data-line-number="61"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&#39;Total life expectancy at birth&#39;</span>,</a>
<a class="sourceLine" id="cb8-62" data-line-number="62">         <span class="dt">y =</span> <span class="st">&#39;Years of life&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-63" data-line-number="63"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>location, </a>
<a class="sourceLine" id="cb8-64" data-line-number="64">               <span class="dt">ncol =</span> <span class="dv">5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-65" data-line-number="65"><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_size =</span> <span class="dv">12</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-66" data-line-number="66"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-67" data-line-number="67">          <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="fl">0.99</span>, <span class="fl">0.985</span>),</a>
<a class="sourceLine" id="cb8-68" data-line-number="68">          <span class="dt">legend.justification =</span> <span class="kw">c</span>(<span class="fl">0.99</span>, <span class="fl">0.985</span>),</a>
<a class="sourceLine" id="cb8-69" data-line-number="69">          <span class="dt">legend.margin =</span> <span class="kw">margin</span>(<span class="dt">t =</span> <span class="dv">0</span>, <span class="dt">r =</span> <span class="dv">0</span>, <span class="dt">b =</span> <span class="dv">0</span>, <span class="dt">l =</span> <span class="dv">0</span>, <span class="dt">unit =</span> <span class="st">&#39;lines&#39;</span>),</a>
<a class="sourceLine" id="cb8-70" data-line-number="70">          <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">face =</span> <span class="st">&#39;bold&#39;</span>),</a>
<a class="sourceLine" id="cb8-71" data-line-number="71">          <span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-72" data-line-number="72">          <span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-73" data-line-number="73">          <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-74" data-line-number="74">          <span class="dt">strip.background =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-75" data-line-number="75"><span class="st">    </span><span class="kw">transition_reveal</span>(year)</a>
<a class="sourceLine" id="cb8-76" data-line-number="76"></a>
<a class="sourceLine" id="cb8-77" data-line-number="77">le_female &lt;-<span class="st"> </span><span class="kw">animate</span>(<span class="dt">plot =</span> le_female, </a>
<a class="sourceLine" id="cb8-78" data-line-number="78">                     <span class="dt">fps =</span> <span class="dv">10</span>, </a>
<a class="sourceLine" id="cb8-79" data-line-number="79">                     <span class="dt">nframes =</span> <span class="dv">150</span>,</a>
<a class="sourceLine" id="cb8-80" data-line-number="80">                     <span class="dt">duration =</span> <span class="dv">15</span>,</a>
<a class="sourceLine" id="cb8-81" data-line-number="81">                     <span class="dt">end_pause =</span> <span class="dv">50</span>,</a>
<a class="sourceLine" id="cb8-82" data-line-number="82">                     <span class="dt">res =</span> <span class="dv">150</span>,</a>
<a class="sourceLine" id="cb8-83" data-line-number="83">                     <span class="dt">width =</span> <span class="dv">8</span>,</a>
<a class="sourceLine" id="cb8-84" data-line-number="84">                     <span class="dt">height =</span> <span class="fl">2.2</span>,</a>
<a class="sourceLine" id="cb8-85" data-line-number="85">                     <span class="dt">units =</span> <span class="st">&#39;in&#39;</span>)</a>
<a class="sourceLine" id="cb8-86" data-line-number="86"></a>
<a class="sourceLine" id="cb8-87" data-line-number="87"><span class="kw">anim_save</span>(<span class="dt">filename =</span> <span class="st">&#39;le_female.gif&#39;</span>,</a>
<a class="sourceLine" id="cb8-88" data-line-number="88">          <span class="dt">animation =</span> le_female,</a>
<a class="sourceLine" id="cb8-89" data-line-number="89">          <span class="dt">path =</span> <span class="st">&#39;./images/posts/2019-01-25-global-burden-of-disease&#39;</span>)</a>
<a class="sourceLine" id="cb8-90" data-line-number="90"></a>
<a class="sourceLine" id="cb8-91" data-line-number="91"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb8-92" data-line-number="92"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb8-93" data-line-number="93"><span class="co">#          General processing that will be useful          #</span></a>
<a class="sourceLine" id="cb8-94" data-line-number="94"><span class="co">#             for several plots down the line              #</span></a>
<a class="sourceLine" id="cb8-95" data-line-number="95"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb8-96" data-line-number="96"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb8-97" data-line-number="97"><span class="co"># Generate a version of the delta dataframe with the measure column spread</span></a>
<a class="sourceLine" id="cb8-98" data-line-number="98">delta_spread &lt;-<span class="st"> </span>delta <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-99" data-line-number="99"><span class="st">    </span><span class="co"># Spread the measures column</span></a>
<a class="sourceLine" id="cb8-100" data-line-number="100"><span class="st">    </span><span class="kw">spread</span>(<span class="dt">key =</span> measure,</a>
<a class="sourceLine" id="cb8-101" data-line-number="101">           <span class="dt">value =</span> val) </a>
<a class="sourceLine" id="cb8-102" data-line-number="102"></a>
<a class="sourceLine" id="cb8-103" data-line-number="103"><span class="co"># Extract 1990 values for each measure and for each subgroup</span></a>
<a class="sourceLine" id="cb8-104" data-line-number="104">baseline_<span class="dv">1990</span> &lt;-<span class="st"> </span>delta_spread <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-105" data-line-number="105"><span class="st">    </span><span class="kw">group_by</span>(location, sex) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-106" data-line-number="106"><span class="st">    </span><span class="co"># Extract 1990 values </span></a>
<a class="sourceLine" id="cb8-107" data-line-number="107"><span class="st">    </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">1990</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-108" data-line-number="108"><span class="st">    </span><span class="co"># Rename columns</span></a>
<a class="sourceLine" id="cb8-109" data-line-number="109"><span class="st">    </span><span class="kw">rename</span>(<span class="st">`</span><span class="dt">Total life expectancy 1990</span><span class="st">`</span> =<span class="st"> `</span><span class="dt">Total life expectancy</span><span class="st">`</span>,</a>
<a class="sourceLine" id="cb8-110" data-line-number="110">           <span class="st">`</span><span class="dt">Years of good health 1990</span><span class="st">`</span> =<span class="st"> `</span><span class="dt">Years of good health</span><span class="st">`</span>,</a>
<a class="sourceLine" id="cb8-111" data-line-number="111">           <span class="st">`</span><span class="dt">Years of poor unhealth 1990</span><span class="st">`</span> =<span class="st"> `</span><span class="dt">Years of poor health</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-112" data-line-number="112"><span class="st">    </span><span class="co"># Remove unneeded column</span></a>
<a class="sourceLine" id="cb8-113" data-line-number="113"><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>metric, <span class="op">-</span>year)</a>
<a class="sourceLine" id="cb8-114" data-line-number="114"></a>
<a class="sourceLine" id="cb8-115" data-line-number="115"><span class="co"># Join baseline_1990 to delta_spread</span></a>
<a class="sourceLine" id="cb8-116" data-line-number="116">delta_spread <span class="op">%&lt;&gt;%</span></a>
<a class="sourceLine" id="cb8-117" data-line-number="117"><span class="st">    </span><span class="kw">left_join</span>(baseline_<span class="dv">1990</span>)</a>
<a class="sourceLine" id="cb8-118" data-line-number="118"></a>
<a class="sourceLine" id="cb8-119" data-line-number="119"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb8-120" data-line-number="120"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb8-121" data-line-number="121"><span class="co">#       Cumulative year-on-year percent change for         #</span></a>
<a class="sourceLine" id="cb8-122" data-line-number="122"><span class="co">#    &#39;years of good health&#39; and &#39;years of poor health&#39;     #</span></a>
<a class="sourceLine" id="cb8-123" data-line-number="123"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb8-124" data-line-number="124"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb8-125" data-line-number="125">delta_spread <span class="op">%&lt;&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-126" data-line-number="126"><span class="st">    </span><span class="co"># Year-over-year change for each subgroup</span></a>
<a class="sourceLine" id="cb8-127" data-line-number="127"><span class="st">    </span><span class="kw">group_by</span>(location, sex) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-128" data-line-number="128"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">p_yoy_good_health =</span> <span class="dv">100</span> <span class="op">*</span><span class="st"> </span>((<span class="st">`</span><span class="dt">Years of good health</span><span class="st">`</span> <span class="op">-</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-129" data-line-number="129"><span class="st">                                           </span><span class="kw">lag</span>(<span class="st">`</span><span class="dt">Years of good health</span><span class="st">`</span>)) <span class="op">/</span><span class="st"> </span><span class="kw">lag</span>(<span class="st">`</span><span class="dt">Years of good health</span><span class="st">`</span>)),</a>
<a class="sourceLine" id="cb8-130" data-line-number="130">           <span class="dt">p_yoy_poor_health =</span> <span class="dv">100</span> <span class="op">*</span><span class="st"> </span>((<span class="st">`</span><span class="dt">Years of poor health</span><span class="st">`</span> <span class="op">-</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-131" data-line-number="131"><span class="st">                                           </span><span class="kw">lag</span>(<span class="st">`</span><span class="dt">Years of poor health</span><span class="st">`</span>)) <span class="op">/</span><span class="st"> </span><span class="kw">lag</span>(<span class="st">`</span><span class="dt">Years of poor health</span><span class="st">`</span>))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-132" data-line-number="132"><span class="st">    </span><span class="co"># Remove lag calc &lt;NA&gt; for 1990, and add cumulative yoy change for each subgroup</span></a>
<a class="sourceLine" id="cb8-133" data-line-number="133"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">p_yoy_good_health =</span> <span class="kw">ifelse</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">1990</span>,</a>
<a class="sourceLine" id="cb8-134" data-line-number="134">                                  <span class="dt">yes =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-135" data-line-number="135">                                  <span class="dt">no =</span> p_yoy_good_health),</a>
<a class="sourceLine" id="cb8-136" data-line-number="136">           <span class="dt">p_yoy_poor_health =</span> <span class="kw">ifelse</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">1990</span>,</a>
<a class="sourceLine" id="cb8-137" data-line-number="137">                                    <span class="dt">yes =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-138" data-line-number="138">                                    <span class="dt">no =</span> p_yoy_poor_health)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-139" data-line-number="139"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">p_cum_yoy_good_health =</span> <span class="kw">cumsum</span>(p_yoy_good_health), </a>
<a class="sourceLine" id="cb8-140" data-line-number="140">           <span class="dt">p_cum_yoy_poor_health =</span> <span class="kw">cumsum</span>(p_yoy_poor_health)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-141" data-line-number="141"><span class="st">    </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb8-142" data-line-number="142"></a>
<a class="sourceLine" id="cb8-143" data-line-number="143"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb8-144" data-line-number="144"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb8-145" data-line-number="145"><span class="co">#           Plot year-on-year percent change for           #</span></a>
<a class="sourceLine" id="cb8-146" data-line-number="146"><span class="co">#    &#39;years of good health&#39; and &#39;years of poor health&#39;     #</span></a>
<a class="sourceLine" id="cb8-147" data-line-number="147"><span class="co">#                                                          #</span></a>
<a class="sourceLine" id="cb8-148" data-line-number="148"><span class="co">############################################################</span></a>
<a class="sourceLine" id="cb8-149" data-line-number="149"><span class="co"># Males</span></a>
<a class="sourceLine" id="cb8-150" data-line-number="150">perc_male &lt;-<span class="st"> </span>delta_spread <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-151" data-line-number="151"><span class="st">    </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &#39;Male&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-152" data-line-number="152"><span class="st">    </span><span class="co"># Gather cum_yoy_* columns</span></a>
<a class="sourceLine" id="cb8-153" data-line-number="153"><span class="st">    </span><span class="kw">gather</span>(<span class="dt">key =</span> <span class="st">&#39;key&#39;</span>,</a>
<a class="sourceLine" id="cb8-154" data-line-number="154">           <span class="dt">value =</span> <span class="st">&#39;value&#39;</span>,</a>
<a class="sourceLine" id="cb8-155" data-line-number="155">           p_cum_yoy_good_health, p_cum_yoy_poor_health) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-156" data-line-number="156"><span class="st">    </span><span class="co"># Plot</span></a>
<a class="sourceLine" id="cb8-157" data-line-number="157"><span class="st">    </span><span class="kw">ggplot</span>(<span class="dt">data =</span> .) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-158" data-line-number="158"><span class="st">    </span><span class="kw">aes</span>(<span class="dt">x =</span> year,</a>
<a class="sourceLine" id="cb8-159" data-line-number="159">        <span class="dt">y =</span> value,</a>
<a class="sourceLine" id="cb8-160" data-line-number="160">        <span class="dt">colour =</span> key) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-161" data-line-number="161"><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-162" data-line-number="162"><span class="st">    </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1990</span>, <span class="dv">1995</span>, <span class="dv">2000</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2017</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-163" data-line-number="163"><span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">5</span>, <span class="dv">20</span>),</a>
<a class="sourceLine" id="cb8-164" data-line-number="164">                       <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-165" data-line-number="165"><span class="st">    </span><span class="kw">scale_colour_manual</span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&#39;years of</span><span class="ch">\n</span><span class="st">good health&#39;</span>, <span class="st">&#39;Years of</span><span class="ch">\n</span><span class="st">poor health&#39;</span>), </a>
<a class="sourceLine" id="cb8-166" data-line-number="166">                        <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&#39;#56B4E9&#39;</span>, <span class="st">&#39;#E69F00&#39;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-167" data-line-number="167"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Cumulative year-over-year percent change in &#39;years of good health&#39; and &#39;years of poor health&#39;&quot;</span>,</a>
<a class="sourceLine" id="cb8-168" data-line-number="168">         <span class="dt">x =</span> <span class="st">&#39;Year&#39;</span>,</a>
<a class="sourceLine" id="cb8-169" data-line-number="169">         <span class="dt">y =</span> <span class="st">&quot;Cumulative change (%)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-170" data-line-number="170"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>location, </a>
<a class="sourceLine" id="cb8-171" data-line-number="171">               <span class="dt">ncol =</span> <span class="dv">5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-172" data-line-number="172"><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_size =</span> <span class="dv">12</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-173" data-line-number="173"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-174" data-line-number="174">          <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="fl">0.13</span>, <span class="fl">0.985</span>),</a>
<a class="sourceLine" id="cb8-175" data-line-number="175">          <span class="dt">legend.justification =</span> <span class="kw">c</span>(<span class="fl">0.99</span>, <span class="fl">0.985</span>),</a>
<a class="sourceLine" id="cb8-176" data-line-number="176">          <span class="dt">legend.margin =</span> <span class="kw">margin</span>(<span class="dt">t =</span> <span class="dv">0</span>, <span class="dt">r =</span> <span class="dv">0</span>, <span class="dt">b =</span> <span class="dv">0</span>, <span class="dt">l =</span> <span class="dv">0</span>, <span class="dt">unit =</span> <span class="st">&#39;lines&#39;</span>),</a>
<a class="sourceLine" id="cb8-177" data-line-number="177">          <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">face =</span> <span class="st">&#39;bold&#39;</span>),</a>
<a class="sourceLine" id="cb8-178" data-line-number="178">          <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>,</a>
<a class="sourceLine" id="cb8-179" data-line-number="179">                                     <span class="dt">hjust =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb8-180" data-line-number="180">                                     <span class="dt">vjust =</span> <span class="fl">1.1</span>),</a>
<a class="sourceLine" id="cb8-181" data-line-number="181">          <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-182" data-line-number="182">          <span class="dt">strip.background =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-183" data-line-number="183"><span class="st">    </span><span class="kw">transition_reveal</span>(year)</a>
<a class="sourceLine" id="cb8-184" data-line-number="184"></a>
<a class="sourceLine" id="cb8-185" data-line-number="185">perc_male &lt;-<span class="st"> </span><span class="kw">animate</span>(<span class="dt">plot =</span> perc_male,</a>
<a class="sourceLine" id="cb8-186" data-line-number="186">                     <span class="dt">fps =</span> <span class="dv">10</span>, </a>
<a class="sourceLine" id="cb8-187" data-line-number="187">                     <span class="dt">nframes =</span> <span class="dv">150</span>,</a>
<a class="sourceLine" id="cb8-188" data-line-number="188">                     <span class="dt">duration =</span> <span class="dv">15</span>,</a>
<a class="sourceLine" id="cb8-189" data-line-number="189">                     <span class="dt">end_pause =</span> <span class="dv">50</span>,</a>
<a class="sourceLine" id="cb8-190" data-line-number="190">                     <span class="dt">res =</span> <span class="dv">150</span>,</a>
<a class="sourceLine" id="cb8-191" data-line-number="191">                     <span class="dt">width =</span> <span class="dv">8</span>,</a>
<a class="sourceLine" id="cb8-192" data-line-number="192">                     <span class="dt">height =</span> <span class="fl">2.75</span>,</a>
<a class="sourceLine" id="cb8-193" data-line-number="193">                     <span class="dt">units =</span> <span class="st">&#39;in&#39;</span>)</a>
<a class="sourceLine" id="cb8-194" data-line-number="194"></a>
<a class="sourceLine" id="cb8-195" data-line-number="195"><span class="kw">anim_save</span>(<span class="dt">filename =</span> <span class="st">&#39;perc_male.gif&#39;</span>,</a>
<a class="sourceLine" id="cb8-196" data-line-number="196">          <span class="dt">animation =</span> perc_male,</a>
<a class="sourceLine" id="cb8-197" data-line-number="197">          <span class="dt">path =</span> <span class="st">&#39;./images/posts/2019-01-25-global-burden-of-disease&#39;</span>)</a>
<a class="sourceLine" id="cb8-198" data-line-number="198"></a>
<a class="sourceLine" id="cb8-199" data-line-number="199"><span class="co"># Females</span></a>
<a class="sourceLine" id="cb8-200" data-line-number="200">perc_female &lt;-<span class="st"> </span>delta_spread <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-201" data-line-number="201"><span class="st">    </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &#39;Female&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-202" data-line-number="202"><span class="st">    </span><span class="kw">gather</span>(<span class="dt">key =</span> <span class="st">&#39;key&#39;</span>,</a>
<a class="sourceLine" id="cb8-203" data-line-number="203">           <span class="dt">value =</span> <span class="st">&#39;value&#39;</span>,</a>
<a class="sourceLine" id="cb8-204" data-line-number="204">           p_cum_yoy_good_health, p_cum_yoy_poor_health) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-205" data-line-number="205"><span class="st">    </span><span class="co"># Plot</span></a>
<a class="sourceLine" id="cb8-206" data-line-number="206"><span class="st">    </span><span class="kw">ggplot</span>(<span class="dt">data =</span> .) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-207" data-line-number="207"><span class="st">    </span><span class="kw">aes</span>(<span class="dt">x =</span> year,</a>
<a class="sourceLine" id="cb8-208" data-line-number="208">        <span class="dt">y =</span> value,</a>
<a class="sourceLine" id="cb8-209" data-line-number="209">        <span class="dt">colour =</span> key) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-210" data-line-number="210"><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-211" data-line-number="211"><span class="st">    </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1990</span>, <span class="dv">1995</span>, <span class="dv">2000</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2017</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-212" data-line-number="212"><span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">5</span>, <span class="dv">20</span>),</a>
<a class="sourceLine" id="cb8-213" data-line-number="213">                       <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-214" data-line-number="214"><span class="st">    </span><span class="kw">scale_colour_manual</span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&#39;Years of</span><span class="ch">\n</span><span class="st">good health&#39;</span>, <span class="st">&#39;Years of</span><span class="ch">\n</span><span class="st">poor health&#39;</span>), </a>
<a class="sourceLine" id="cb8-215" data-line-number="215">                        <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&#39;#56B4E9&#39;</span>, <span class="st">&#39;#E69F00&#39;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-216" data-line-number="216"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Cumulative year-over-year percent change in &#39;years of good health&#39; and &#39;years of poor health&#39;&quot;</span>,</a>
<a class="sourceLine" id="cb8-217" data-line-number="217">         <span class="dt">x =</span> <span class="st">&#39;Year&#39;</span>,</a>
<a class="sourceLine" id="cb8-218" data-line-number="218">         <span class="dt">y =</span> <span class="st">&quot;Cumulative change (%)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-219" data-line-number="219"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>location, </a>
<a class="sourceLine" id="cb8-220" data-line-number="220">               <span class="dt">ncol =</span> <span class="dv">5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-221" data-line-number="221"><span class="st">    </span><span class="kw">theme_bw</span>(<span class="dt">base_size =</span> <span class="dv">12</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-222" data-line-number="222"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-223" data-line-number="223">          <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="fl">0.13</span>, <span class="fl">0.985</span>),</a>
<a class="sourceLine" id="cb8-224" data-line-number="224">          <span class="dt">legend.justification =</span> <span class="kw">c</span>(<span class="fl">0.99</span>, <span class="fl">0.985</span>),</a>
<a class="sourceLine" id="cb8-225" data-line-number="225">          <span class="dt">legend.margin =</span> <span class="kw">margin</span>(<span class="dt">t =</span> <span class="dv">0</span>, <span class="dt">r =</span> <span class="dv">0</span>, <span class="dt">b =</span> <span class="dv">0</span>, <span class="dt">l =</span> <span class="dv">0</span>, <span class="dt">unit =</span> <span class="st">&#39;lines&#39;</span>),<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">face =</span> <span class="st">&#39;bold&#39;</span>),</a>
<a class="sourceLine" id="cb8-226" data-line-number="226">          <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>,</a>
<a class="sourceLine" id="cb8-227" data-line-number="227">                                     <span class="dt">hjust =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb8-228" data-line-number="228">                                     <span class="dt">vjust =</span> <span class="fl">1.1</span>),</a>
<a class="sourceLine" id="cb8-229" data-line-number="229">          <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-230" data-line-number="230">          <span class="dt">strip.background =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-231" data-line-number="231"><span class="st">    </span><span class="kw">transition_reveal</span>(year)</a>
<a class="sourceLine" id="cb8-232" data-line-number="232"></a>
<a class="sourceLine" id="cb8-233" data-line-number="233">perc_female &lt;-<span class="st"> </span><span class="kw">animate</span>(<span class="dt">plot =</span> perc_female, </a>
<a class="sourceLine" id="cb8-234" data-line-number="234">                       <span class="dt">fps =</span> <span class="dv">10</span>, </a>
<a class="sourceLine" id="cb8-235" data-line-number="235">                       <span class="dt">nframes =</span> <span class="dv">150</span>,</a>
<a class="sourceLine" id="cb8-236" data-line-number="236">                       <span class="dt">duration =</span> <span class="dv">15</span>,</a>
<a class="sourceLine" id="cb8-237" data-line-number="237">                       <span class="dt">end_pause =</span> <span class="dv">50</span>,</a>
<a class="sourceLine" id="cb8-238" data-line-number="238">                       <span class="dt">res =</span> <span class="dv">150</span>,</a>
<a class="sourceLine" id="cb8-239" data-line-number="239">                       <span class="dt">width =</span> <span class="dv">8</span>,</a>
<a class="sourceLine" id="cb8-240" data-line-number="240">                       <span class="dt">height =</span> <span class="fl">2.75</span>,</a>
<a class="sourceLine" id="cb8-241" data-line-number="241">                       <span class="dt">units =</span> <span class="st">&#39;in&#39;</span>)</a>
<a class="sourceLine" id="cb8-242" data-line-number="242"></a>
<a class="sourceLine" id="cb8-243" data-line-number="243"><span class="kw">anim_save</span>(<span class="dt">filename =</span> <span class="st">&#39;perc_female.gif&#39;</span>,</a>
<a class="sourceLine" id="cb8-244" data-line-number="244">          <span class="dt">animation =</span> perc_female,</a>
<a class="sourceLine" id="cb8-245" data-line-number="245">          <span class="dt">path =</span> <span class="st">&#39;./images/posts/2019-01-25-global-burden-of-disease&#39;</span>)</a></code></pre></div>
<div style="margin-left:auto;margin-right:auto;max-width:98%;">
<div style="border-width:thin;border-style:solid;border-color:#E29EA7;">
<!-- Females -->
<h3 style="margin-top:0px">
Females
</h3>
<img src='images/posts/2019-01-25-global-burden-of-disease/le_female.gif'> <img src='images/posts/2019-01-25-global-burden-of-disease/perc_female.gif'> <!-- Males -->
<h3 style="margin-top:0px">
Males
</h3>
<p><img src='images/posts/2019-01-25-global-burden-of-disease/le_male.gif'> <img src='images/posts/2019-01-25-global-burden-of-disease/perc_male.gif'></p>
</div>
<p style="font-size:90%;font-style:italic;width:98%;">
<b>Figure 3: Total life expectancy (top panel for each sex), and the cumulative year-over-year percent change in years of good health and years of poor health (bottom panel for each sex) for females (top two panels) and males (bottom two panels), and each SDI quintile.</b><br> SDI=Socio-demographic index
</p>
</div>
<p>I’m quite pleased with the way the plots of cumulative year-over-year percent change in <em>years of good health</em> and <em>years of poor health</em> came out. I think that compared to the original figure from the publication, it is now much clearer how the relative rate of growth in <em>years of good health</em> and <em>years of poor health</em> has changed over the past three decades. That is, you can now see one of the key finds of the paper, and you can now appreciate the relative changes in the rate of growth in <em>years of good health</em> and <em>years of poor health</em> over time and between SDI quintiles.</p>
<p>While <em>total life expectancy</em> has followed a relatively smooth upward trajectory between 1990 and 2017 (for both sexes and across SDI quintiles), the relative rate of growth of <em>years of good health</em> and <em>years of poor health</em> to this increase in <em>total life expectancy</em> has see significant shifts over time. And, these shifts are not consistent across SDI quintiles.</p>
<p>At the two extremes are the High and Low SDI quintiles. The High SDI quintile has seen a dramatic increase in the cumulative year-over-year percent change in <em>years of poor health</em> relative to <em>years of good health</em>, with the two curves separating as early as the early 1990s in males and early 2000s in females. The faster rate of growth in <em>years of poor health</em> than <em>years of good health</em> means that <em>years of poor health</em> is contributing proportionately more to the rise in <em>total life expectancy</em> than <em>years of good health</em> is. In the Low SDI quintile, we see the opposite trend, with the <em>years of poor healthy</em> and <em>years of good health</em> curves tracking each other until the mid-1990s in females and mid-2000s for males, after which the cumulative rate of growth in <em>years of good health</em> outstripped that for <em>years of poor health</em>. The long-term trends in the Low SDI quintile are desirable, while those in the High SDI quintile are not.</p>
<p>The remaining quintiles show a graded shift in cumulative year-over-year percent change in <em>years of good health</em> and <em>years of poor health</em> from the situation in the High SDI quintile to the Low SDI quintile.</p>
<p>Hopefully you find the analysis useful. If you have any suggestions on how to improve the blog post, please DM me on Twitter (<a href="https://twitter.com/painblogR" target="_blank"><span class="citation">@painblogR</span></a>), send me an email (<a href="mailto:peter.kamerman@gmail.com">peter.kamerman@gmail.com</a>), or log an issue on the painblogR github repo for this site (<a href="https://github.com/kamermanpr/painblogr-build/issues" target="_blank">kamermanpr/painblogr-build</a>).</p>
<hr />
</div>
</div>
<div id="session-information" class="section level2">
<h2>Session information</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">sessionInfo</span>()</a></code></pre></div>
<pre><code>## R version 3.6.0 (2019-04-26)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS Mojave 10.14.5
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] skimr_1.0.7           magrittr_1.5          geojsonio_0.7.0      
##  [4] lubridate_1.7.4       xml2_1.2.0            sp_1.3-1             
##  [7] leaflet_2.0.2         highcharter_0.7.0     flexdashboard_0.5.1.1
## [10] gganimate_1.0.3       gdtools_0.1.9         ggiraph_0.6.1        
## [13] svglite_1.2.2         pander_0.6.3          knitr_1.23           
## [16] forcats_0.4.0         stringr_1.4.0         dplyr_0.8.3          
## [19] purrr_0.3.2           readr_1.3.1           tidyr_0.8.3.9000     
## [22] tibble_2.1.3          ggplot2_3.2.0         tidyverse_1.2.1      
## 
## loaded via a namespace (and not attached):
##  [1] nlme_3.1-140       sf_0.7-6           xts_0.11-2        
##  [4] webshot_0.5.1      progress_1.2.2     httr_1.4.0        
##  [7] tools_3.6.0        backports_1.1.4    utf8_1.1.4        
## [10] rgdal_1.4-4        R6_2.4.0           KernSmooth_2.23-15
## [13] DBI_1.0.0          rgeos_0.4-3        lazyeval_0.2.2    
## [16] colorspace_1.4-1   withr_2.1.2.9000   tidyselect_0.2.5  
## [19] prettyunits_1.0.2  curl_3.3           compiler_3.6.0    
## [22] cli_1.1.0          rvest_0.3.4        labeling_0.3      
## [25] scales_1.0.0       classInt_0.3-3     digest_0.6.20     
## [28] foreign_0.8-71     rmarkdown_1.13     pkgconfig_2.0.2   
## [31] htmltools_0.3.6    highr_0.8          htmlwidgets_1.3   
## [34] rlang_0.4.0        readxl_1.3.1       TTR_0.23-4        
## [37] rstudioapi_0.10    quantmod_0.4-15    shiny_1.3.2       
## [40] farver_1.1.0       generics_0.0.2     zoo_1.8-6         
## [43] jsonlite_1.6       crosstalk_1.0.0    rlist_0.4.6.1     
## [46] kableExtra_1.1.0   fansi_0.4.0        Rcpp_1.0.1        
## [49] munsell_0.5.0      stringi_1.4.3      whisker_0.3-2     
## [52] yaml_2.2.0         jqr_1.1.0          maptools_0.9-5    
## [55] grid_3.6.0         promises_1.0.1     crayon_1.3.4      
## [58] lattice_0.20-38    haven_2.1.1        geojson_0.3.2     
## [61] hms_0.5.0          zeallot_0.1.0      pillar_1.4.2      
## [64] igraph_1.2.4.1     boot_1.3-23        glue_1.3.1        
## [67] evaluate_0.14      V8_2.3             data.table_1.12.2 
## [70] modelr_0.1.4       vctrs_0.2.0        tweenr_1.0.1      
## [73] httpuv_1.5.1       cellranger_1.1.0   gtable_0.3.0      
## [76] assertthat_0.2.1   xfun_0.8           mime_0.7          
## [79] xtable_1.8-4       broom_0.5.2        e1071_1.7-2       
## [82] later_0.8.0        class_7.3-15       viridisLite_0.3.0 
## [85] units_0.6-3        ellipsis_0.2.0.1</code></pre>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>GBD 2017 DALYs and HALE Collaborators. Global, regional, and national disability-adjusted life-years (DALYs) for 359 diseases and injuries and healthy life expectancy (HALE) for 195 countries and territories, 1990-2017: a systematic analysis for the Global Burden of Disease Study 2017. <em>Lancet</em> <strong>392</strong>:1859–1922, 2018. doi: <a href="https://doi.org/10.1016/S0140-6736(18)32335-3">10.1016/S0140-6736(18)32335-3</a>.<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p><em>years of poor health = total life expectancy - years of good health</em><a href="#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</div>

        <!-- Include these sections here, otherwise YAML headings not inserted -->
        <!-- Share -->
        <div class="share">
            <p style="display:inline-block">
                <hr>
                <h3>Share</h3>&ensp;
                <a href="mailto:?subject=When your ‘golden years’ are not so golden&body=Hi, I thought you might like this post I found on painblogR:%0D%0A%0D%0Ahttps://www.painblogr.org/2019-01-25-global-burden-of-disease.html.%0D%0A%0D%0ABest regards" target="_blank"><i class="fa fa-envelope" style="color:#000000;vertical-align:middle;" title="Share on email" ></i></a>&ensp;
                <a href="https://twitter.com/intent/tweet?url=https://www.painblogr.org/2019-01-25-global-burden-of-disease.html&text=When your ‘golden years’ are not so golden&via=painblogR" rel="nofollow" target="_blank" title="Share on Twitter"><i class="fa fa-twitter" style="color:#000000;vertical-align:middle;"></i></a>&ensp;
                <a href="https://facebook.com/sharer.php?u=https://www.painblogr.org/2019-01-25-global-burden-of-disease.html" rel="nofollow" target="_blank" title="Share on Facebook"><i class="fa fa-facebook" style="color:#000000;vertical-align:middle;"></i></a>&ensp;
                <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.painblogr.org/2019-01-25-global-burden-of-disease.html" rel="nofollow" target="_blank" title="Share on LinkedIn"><i class="fa fa-linkedin" style="color:#000000;vertical-align:middle;"></i></a>
            </p>
        </div>

        <!-- Disqus
        <div class="comments">
            <hr>
            <h3>Comments</h3>
            <div id="disqus_thread"></div>
            <script>
                var disqus_config = function() {
                    this.page.url = 'https://www.painblogr.org/2019-01-25-global-burden-of-disease.html'
                    this.page.identifier = '/2019-01-25-global-burden-of-disease.html'
                };

                (function() {
                    var d = document,
                        s = d.createElement('script');

                    s.src = 'https://www.painblogr.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
            </noscript>
        </div>
    </div> -->

    <!-- Footer -->
    <footer>
         <!--footer-->
 <div class="container-fluid" id="foot" style="background-color:#FFFFFF;border-top:#CCCCCC solid 1px;color:#999999;font-family:'Open sans', 'Helvetica';">
     <div class="row">
         <div class="col-sm-4">
             <p>Hosted by: <a href="https://www.netlify.com" target="_blank">netlify.com</a>
                 <br>Powered by: <a href="http://rmarkdown.rstudio.com/" target="_blank">RMarkdown</a>
                 <br>
                 <br>
             </p>
         </div>
         <div class="col-sm-4">
             <p>Fork/clone from: <a href="https://github.com/kamermanpr/kamermanpr.github.io.git" target="_blank">GitHub</a>
                 <br>License: <a href="./LICENSE.html" target="_blank">MIT & CC-BY 4.0</a>
                 <br>
                 <br>
             </p>
         </div>
         <div class="col-sm-4">
             <h4 style="padding:0;margin:0">painblogR</h3>
 			   <p style="display:inline-block">
 				   <span style="font-style:italic">by Peter Kamerman</span>
 				   &ensp;
 				   <a href="mailto:peter.kamerman@gmail.com" title="Email me" target="_blank"><i style="color:#999999;" class="fa fa-envelope"></i></a>
 				   &ensp;
 				   <a href="//twitter.com/@painblogR" target="_blank" title="Follow me"><i style="color:#999999;" class="fa fa-twitter"></i></a>
 			   </p>
 		   </div>
 	   </div>
 	</div> 
    </footer>
</body>

<!-- extras ------------------------------------------------------->
<!-- Mathjax -->

</html>

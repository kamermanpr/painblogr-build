<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" >

<!-- Head --------------------------------------------------------->

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="generator" content="pandoc"/>
	
	
	 <script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
 <meta name="viewport" content="width=device-width, initial-scale=1" />
 <link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
 <script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
 <script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
 <script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
 <script src="site_libs/navigation-1.1/tabsets.js"></script> 

	
		<style type="text/css">
		code {
			white-space: pre;
		}
	</style>
	<style type="text/css">
		div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #0000ff; } /* Keyword */
code > span.ch { color: #008080; } /* Char */
code > span.st { color: #008080; } /* String */
code > span.co { color: #008000; } /* Comment */
code > span.ot { color: #ff4000; } /* Other */
code > span.al { color: #ff0000; } /* Alert */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #008000; font-weight: bold; } /* Warning */
code > span.cn { } /* Constant */
code > span.sc { color: #008080; } /* SpecialChar */
code > span.vs { color: #008080; } /* VerbatimString */
code > span.ss { color: #008080; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { color: #0000ff; } /* ControlFlow */
code > span.op { } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #ff4000; } /* Preprocessor */
code > span.do { color: #008000; } /* Documentation */
code > span.an { color: #008000; } /* Annotation */
code > span.cv { color: #008000; } /* CommentVar */
code > span.at { } /* Attribute */
code > span.in { color: #008000; } /* Information */ 
	</style>

		<style type="text/css">
		pre:not([class]) {
			background-color: white;
		}
	</style>
	   	<style type="text/css">
		h1 {
			font-size: 34px;
		}

		h1.title {
			font-size: 38px;
		}

		h2 {
			font-size: 30px;
		}

		h3 {
			font-size: 24px;
		}

		h4 {
			font-size: 18px;
		}

		h5 {
			font-size: 16px;
		}

		h6 {
			font-size: 12px;
		}

		.table th:not([align]) {
			text-align: left;
		}

		
	</style>
	
		<link rel="stylesheet" href="css/custom.css" type="text/css" />  
    <!-- Latest maxdcn font-awesome and academicons -->
    <link rel="stylesheet" href="./css/font-awesome-4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./css/academicons-1.7.0/css/academicons.min.css">

    <!-- custom css -->
        <link rel="stylesheet" href="css/custom.css" type="text/css" />
	
    <!-- Include these sections here, otherwise YAML headings not inserted -->
    <!-- Google analytics -->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-71613331-1', 'auto');
        ga('send', 'pageview');
    </script>

    <!-- SEO -->
    <title>The gganimate package in action: Probability theory</title>
    <meta name="description" content="Using the gganimate package to illustrate the central limit theorem, and law of large numbers.">
    <link rel="author" href="https://plus.google.com/u/0/103355314187199079295" />
    <meta name="robots" content="robots.txt">
    <link rel="canonical" href="http://painblogr.org/2016-05-17-probability-theory.html">

    <!-- Twittercard -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@painblogR">
    <meta name="twitter:creator" content="@painblogR">
    <meta name="twitter:title" content="The gganimate package in action: Probability theory">
    <meta name="twitter:description" content="Using the gganimate package to illustrate the central limit theorem, and law of large numbers.">
    <meta name="twitter:image" content="./images/posts/2016-05-17-probability-theory/post-image.png">
    <meta name="twitter:url" content="http://painblogr.org/2016-05-17-probability-theory.html">

    <!-- Opengraph -->
    <meta property="og:title" content="The gganimate package in action: Probability theory">
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://painblogr.org/2016-05-17-probability-theory.html">
    <meta property="og:image" content="./images/posts/2016-05-17-probability-theory/post-image.png">
    <meta property="og:description" content="Using the gganimate package to illustrate the central limit theorem, and law of large numbers.">
    <meta property="og:site_name" content="painblogR">
    <meta property="fb:admins" content="668546729">
    <meta property="fb:app_id" content="1666329553623083">
</head>

<!-- Body --------------------------------------------------------->

<body>
    <!-- Navigation bar -->
    <nav class="navbar navbar-fixed-top" role="navigation" , style="background-color:#FFFFFF;border-bottom: 1px solid #CCCCCC;">
        <div class="container-fluid" id="navfluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar-collapse" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <img src="images/capsaicin.png" alt="logo" , style="max-height:60px;padding-top:5px;">
                <span class="site-title"><a href="http://painblogr.org" style="color:#000000;font-size:250%;vertical-align:middle;">
				painblogR</a></span>&emsp;
            </div>

            <div class="collapse navbar-collapse" id="bs-navbar-collapse">
                <ul class="nav navbar-nav" style="display:table-row;padding-top:7px">
                    <li style="display:table-cell;float:none;vertical-align:middle;font-size:16px;"><a href="http://painblogr.org">Home</a></li>
                    <li style="display:table-cell;float:none;vertical-align:middle;font-size:16px;"><a href="./archive.html">Archive</a></li>
                    <li class="dropdown" style="display:table-cell;float:none;vertical-align:middle;font-size:16px;">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="./about_me.html">About me</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="./publications.html">Publications & Reprints </a></li>
                        </ul>
                    </li>
                    <li class="dropdown" style="display:table-cell;float:none;vertical-align:middle;font-size:16px;">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Teaching<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="http://painblogr.org/biostatistics/">Introduction to Biostatistics</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- /. nav-collapse -->
        </div>
        <!-- /. container-fluid -->
    </nav>

	<!-- Extras -->
		<style type = "text/css">
		code {
  			color: inherit;
  			background-color: rgba(0, 0, 0, 0.04);
		}
		img {
  			max-width:100%;
  			height: auto;
		}
		.tabbed-pane {
  			padding-top: 12px;
		}
		button.code-folding-btn:focus {
  			outline: none;
		}
	</style>

	<div class="container-fluid main-container">
		<!-- tabsets -->
		<script src="/tabsets.js"></script>
		<script>
			$(document).ready(function () {
  			window.buildTabsets("TOC");
			});
		</script>

		<!-- code folding -->
		
		<div class="fluid-row" id="header">

    <!-- Main text --->
    <div class="container-fluid" id="mainbody">
         
        <h1>The gganimate package in action: Probability theory</h1> 
        <h4>Peter Kamerman</h4> 
        <em>17 May 2016</em> <p><br></p>
<div id="background" class="section level2">
<h2>Background</h2>
<p><em>(You can grab the full R script from <a href="https://github.com/kamermanpr/miscellaneous/tree/master/central-limit-n-large-numbers">GitHub</a>, or view the RMarkdown output - with code - at <a href="//beta.rstudioconnect.com/kamermanpr/central-limit-n-large-numbers/">RStudio Connect</a>).</em></p>
<p>I have wanted to try David Robinson’s (<span class="citation">@drob</span>) <a href="//github.com/dgrtwo/gganimate">gganimate</a> package since I came across it a few months ago. The package extends Hadley Wickham’s (<span class="citation">@hadleywickham</span>) <a href="//github.com/hadley/ggplot2">ggplot2</a> package by adding a <em>‘frame’</em> aesthetic that provides a time factor to geoms, allowing them to be animated.</p>
<p>Recently, the opportunity to put the package through its paces arose while I was preparing materials for an <a href="//painblogr.org/biostatistics/">introductory biostatistics</a> tutorial for undergrad students. I wanted to demonstrate the <em>central limit theorem</em> and <em>law of large numbers</em>, and thought that animations would help deliver the message.</p>
<p>The central limit theorem provides a shortcut to knowing the sampling distribution, which is the probability distribution of a statistic (e.g., mean, proportion) for all possible samples from a population. The theorem is one of the cornerstones of probability theory because it allows you to make statements about the sampling distribution for a particular statistic without having to sample the entire population. As such, it forms the basis of statistical inference.</p>
<p>The central limit theorem states that the sampling distribution of an independent, random variable is normal or near-normal if a sufficiently large number of (equal-sized) samples are taken. If the sampling distribution for a statistic follows a normal or near-normal distribution we can make probability statements about the range of values in which the statistic lies. For example, there is a 68% probability that the sample statistic is within 1 standard deviation of the population value, and a 95% probability that it lies within about 2 standard deviations (see figure below). In the case of the sampling distribution, the standard deviation of the distribution is also called the <em>standard error</em>.</p>
<!-- Use html to allow control over plot dimensions (480 x 480px) -->
<p><img src="images/posts/2016-05-17-probability-theory/normal-distr.png"
style="height:343px;width:480px; display:block;margin-right:auto;margin-left:auto"></p>
<p>The size of the standard error also allows us to gauge the precision of the sample statistic, and this <em>‘width’</em> of the sampling distribution is dependent on the size of the samples. From a technical point of view, the standard error of the sample statistic is equal to the standard deviation of the population divided by the square root of the sample size (<span class="math inline">\(se = \frac{\sigma}{\sqrt{n}}\)</span>). Basically, as the size of each sample increases the samples are more likely to be representative of the population, and therefore variability around the point estimate should decrease. The figure below shows the effect of increasing sample size on the precision of the standard error.</p>
<p><img src="images/posts/2016-05-17-probability-theory/sem-plot.png" style="height:480px;width:480px;display:block;margin-right:auto;margin-left:auto"></p>
<p>This leads us to the <em>law of large numbers</em>. At a simplistic level, the central limit theorem tells us about the shape of the sampling distribution, while the law of large numbers tells us where the centre of the distribution lies. From the law of large numbers we can show that the cumulative result from a large number of trials/samples tends towards the true value in the population. That is, the probability of an unusual outcome becomes smaller as the number of trials/samples increases. This convergence in probability is also called the <em>weak law of large numbers</em>.</p>
</div>
<div id="gganimate-the-theories-in-action" class="section level2">
<h2>gganimate: the theories in action</h2>
<p>I used the <em>gg_animate</em> function from the <em>gganimate</em> package to put the two theories into action.</p>
<div id="our-population" class="section level3">
<h3>Our population</h3>
<p>The central limit theorem holds across different distributions, and to illustrate this point I started with a population generated by taking a random sample (<em>N</em> = 200,000) from the exponential distribution (right-skewed) with rate 1.</p>
<p>The density distribution of this dataset is shown in the figure below (the mean is marked by the orange line), and it served as the population from which samples were taken to demonstrate the central limit theorem and the law of large numbers.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
###############
<span class="co"># Load packages</span>
###############
<span class="kw">library</span>(gganimate) <span class="co"># Get it: devtools::install_github(&quot;dgrtwo/gganimate&quot;)</span>
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(tidyr)

#########################
<span class="co"># Right-skewed population</span>
#########################

<span class="co"># Create a right-skewed dataset</span>
foo &lt;-<span class="st"> </span><span class="kw">rexp</span>(<span class="dv">200000</span>)

<span class="co"># Convert &#39;foo&#39; into a data.frame for plotting</span>
distr &lt;-<span class="st"> </span><span class="kw">data_frame</span>(<span class="dt">data =</span> foo)

<span class="co"># Plot the original right-skewed distribution</span>
distr.plot &lt;-<span class="st"> </span><span class="kw">ggplot</span>(distr, <span class="kw">aes</span>(data)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_density</span>(<span class="dt">fill =</span> <span class="st">&#39;#0072B2&#39;</span>, <span class="dt">colour =</span> <span class="st">&#39;#0072B2&#39;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="kw">mean</span>(foo), <span class="dt">colour =</span> <span class="st">&quot;#E69F00&quot;</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">14</span>),
                       <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">14</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),
                       <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span>, <span class="fl">0.8</span>, <span class="dv">1</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&#39;</span><span class="ch">\n</span><span class="st">Value&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;Probability</span><span class="ch">\n</span><span class="st">&#39;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">17</span>),
          <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">17</span>),
          <span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">17</span>),
          <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(),
          <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&#39;gray80&#39;</span>, <span class="dt">size =</span> <span class="fl">0.3</span>),
          <span class="dt">panel.background =</span> <span class="kw">element_blank</span>())

<span class="co"># Save the plot</span>
<span class="kw">ggsave</span>(<span class="st">&#39;original-distr.png&#39;</span>, distr.plot)</code></pre></div>
<!-- Use html to allow control over plot dimensions (480 x 480px) -->
<p><img src="images/posts/2016-05-17-probability-theory/original-distr.png" style="height:480px;width:480px;display:block;margin-right:auto;margin-left:auto;"></p>
</div>
<div id="the-central-limit-theorem-in-action" class="section level3">
<h3>The central limit theorem in action</h3>
<p>To demonstrate the central limit theorem, I took 5000 samples (without replacement) of <em>n</em> = 200 each from the ‘population’ of 200,000, and calculated the mean for each sample. I then tabulated the frequency at which sample means occurred across the 5000 samples, and used these data to plot a frequency histogram. However, in addition to the usual ggplot2 code, I added the gganimate aesthetic functions (<strong>‘frame’</strong> and <strong>‘cumulative’</strong>) to the geom_bar aesthetics. Adding these new aesthetics allowed the gg_animate function to take the ggplot2 object and to sequentially add the frequency bins of sample means as frames in an animation (‘frame’), and for each frame to built cumulatively on the previous one (‘cumulative = TRUE’).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
#######################
<span class="co"># Central limit theorem</span>
#######################

<span class="co"># Create an empty list, and a &#39;for loop&#39; counter</span>
bar &lt;-<span class="st"> </span><span class="kw">list</span>()
cnt &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5000</span>

<span class="co"># Take 5000 samples of n = 200 from &#39;foo&#39; and make a list of sample means.</span>
<span class="cf">for</span>(i <span class="cf">in</span> cnt){
    bar[[i]] &lt;-<span class="st"> </span><span class="kw">mean</span>(<span class="kw">sample</span>(foo, <span class="dt">size =</span> <span class="dv">200</span>))

<span class="co"># Process data in &#39;bar&#39; for plotting</span>
## Unlist and round to reduce the number of bins for CLT plot
baz &lt;-<span class="st"> </span><span class="kw">round</span>(<span class="kw">unlist</span>(bar), <span class="dv">2</span>)

## cross-tabulate the data to get frequency bins
boo &lt;-<span class="st"> </span><span class="kw">xtabs</span>(<span class="op">~</span>baz)

## Extract the names (&#39;bins&#39;)
nam &lt;-<span class="st"> </span><span class="kw">names</span>(boo)

## Make data.frame for plotting
bee &lt;-<span class="st"> </span><span class="kw">data_frame</span>(<span class="dt">sample =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(boo)),
                  <span class="dt">mean =</span> <span class="kw">as.numeric</span>(nam),
                  <span class="dt">freq =</span> <span class="kw">as.numeric</span>(boo))

<span class="co"># Plot the data</span>
clt &lt;-<span class="st"> </span><span class="kw">ggplot</span>(bee, <span class="kw">aes</span>(<span class="dt">y =</span> freq, <span class="dt">x =</span> mean, <span class="dt">frame =</span> sample)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">cumulative =</span> <span class="ot">TRUE</span>), <span class="dt">stat =</span> <span class="st">&#39;identity&#39;</span>,
             <span class="dt">fill =</span> <span class="st">&#39;#0072B2&#39;</span>, <span class="dt">colour =</span> <span class="st">&#39;#0072B2&#39;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="kw">mean</span>(foo), <span class="dt">colour =</span> <span class="st">&quot;#E69F00&quot;</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="fl">0.7</span>, <span class="fl">1.3</span>),
                       <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dt">from =</span> <span class="fl">0.7</span>, <span class="dt">to =</span> <span class="fl">1.3</span>, <span class="dt">by =</span> <span class="fl">0.1</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&#39;bin counter =&#39;</span>,
         <span class="dt">x =</span> <span class="st">&#39;</span><span class="ch">\n</span><span class="st">Sample mean&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;Frequency</span><span class="ch">\n</span><span class="st">&#39;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">20</span>),
          <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">20</span>),
          <span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">20</span>),
          <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(),
          <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&#39;gray80&#39;</span>, <span class="dt">size =</span> <span class="fl">0.3</span>),
          <span class="dt">panel.background =</span> <span class="kw">element_blank</span>())

<span class="co"># Animate plots with gg_animate</span>
<span class="kw">gg_animate</span>(clt, <span class="dt">interval =</span> <span class="fl">0.2</span>, <span class="st">&#39;central-limit.gif&#39;</span>)</code></pre></div>
<p>The output is shown in the next figure, and as you can see, despite the samples being obtained from a right-skewed distribution, the distribution of sample means is roughly normal, and centred around the mean of the population (orange line).</p>
<p><img src="images/posts/2016-05-17-probability-theory/central-limit.gif"
style="display:block;margin-right:auto;margin-left:auto;max-width:100%;"></p>
</div>
<div id="the-law-of-large-numbers-in-action" class="section level3">
<h3>The law of large numbers in action</h3>
<p>To illustrate the law of large numbers, I took the 5000 sample means I had generated and calculated a cumulative mean across the samples. The cumulative mean was then plotted against the sample number in ggplot2, with the gganimate <strong>‘frame’</strong> and <strong>‘cumulative’</strong> aesthetics added to geom_line, which allowed gg_animate to depict the changing cumulative mean across increasing sample number as frames in the animation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
######################
<span class="co"># Law of large numbers</span>
######################

<span class="co"># Process the data in &#39;bar&#39; for plotting</span>
## Unlist
baz_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">unlist</span>(bar)

## Calculate the cumulative mean for plotting
zoot &lt;-<span class="st"> </span>baz_<span class="dv">2</span> <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">data_frame</span>(<span class="dt">mean =</span> .) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">cmean =</span> <span class="kw">round</span>(<span class="kw">cummean</span>(mean),<span class="dv">4</span>),
           <span class="dt">count =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(mean)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">select</span>(count, mean, cmean)

<span class="co"># Plot the data</span>
lln &lt;-<span class="st"> </span><span class="kw">ggplot</span>(zoot_short, <span class="kw">aes</span>(<span class="dt">y =</span> cmean, <span class="dt">x =</span> count)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">frame =</span> count, <span class="dt">cumulative =</span> <span class="ot">TRUE</span>),
              <span class="dt">colour =</span> <span class="st">&#39;#0072B2&#39;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="kw">mean</span>(foo), <span class="dt">colour =</span> <span class="st">&quot;#E69F00&quot;</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&#39;Sample counter =&#39;</span>,
         <span class="dt">x =</span> <span class="st">&#39;</span><span class="ch">\n</span><span class="st">Sample number&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;Cumulative mean</span><span class="ch">\n</span><span class="st">&#39;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">20</span>),
          <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">20</span>),
          <span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">20</span>),
          <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(),
          <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&#39;gray80&#39;</span>, <span class="dt">size =</span> <span class="fl">0.3</span>),
          <span class="dt">panel.background =</span> <span class="kw">element_blank</span>())

<span class="co"># Animate plots with gg_animate</span>
<span class="kw">gg_animate</span>(lln, <span class="dt">interval =</span> <span class="fl">0.2</span>, <span class="st">&#39;law-large-numbers.gif&#39;</span>)</code></pre></div>
<p>The resulting figure is shown below, and shows the cumulative mean of sample means getting closer to the population mean as the number of samples increases.</p>
<p><img src="images/posts/2016-05-17-probability-theory/law-large-numbers.gif"
style="display:block;margin-right:auto;margin-left:auto;max-width:100%;"></p>
<p>So there you have it, the central limit theorem and the law of large numbers graphically illustrated using the awesome gganimate package in combination with ggplot2. Making the creation of animated ggplots simple.</p>
<hr />
</div>
</div>
<div id="tldr" class="section level2">
<h2>tl;dr</h2>
<div id="github" class="section level4">
<h4>GitHub</h4>
<p>You can clone the full <em>RMarkdown</em> file from <a href="//github.com/kamermanpr/miscellaneous/tree/master/central-limit-n-large-numbers">GitHub</a>, or view the file at <a href="//beta.rstudioconnect.com/kamermanpr/central-limit-n-large-numbers/">RStudio Connect</a>.</p>
</div>
<div id="ggplot2-extensions" class="section level4">
<h4>ggplot2 extensions</h4>
<p>You can find more extensions for ggplot from <a href="//www.ggplot2-exts.org/index.html">ggplot2 extensions</a>.</p>
</div>
<div id="oops" class="section level4">
<h4>Oops</h4>
<p>The little I know about stats is dangerous, so if you spot an error please let me know by submitting an <a href="//github.com/kamermanpr/miscellaneous/issues">issue</a> on GitHub or by adding a comment below.</p>
</div>
</div>

        <!-- Include these sections here, otherwise YAML headings not inserted -->
        <!-- Share -->
        <div class="share">
            <p style="display:inline-block">
                <hr>
                <h3>Share</h3>&ensp;
                <a href="mailto:?subject=The gganimate package in action: Probability theory&body=Hi, I thought you might like this post I found on painblogR:%0D%0A%0D%0Ahttp://painblogr.org/2016-05-17-probability-theory.html.%0D%0A%0D%0ABest regards" target="_blank"><i class="fa fa-envelope" style="color:#000000;vertical-align:middle;" title="Share on email" ></i></a>&ensp;
                <a href="https://twitter.com/intent/tweet?url=http://painblogr.org/2016-05-17-probability-theory.html&text=The gganimate package in action: Probability theory&via=painblogR" rel="nofollow" target="_blank" title="Share on Twitter"><i class="fa fa-twitter" style="color:#000000;vertical-align:middle;"></i></a>&ensp;
                <a href="https://facebook.com/sharer.php?u=http://painblogr.org/2016-05-17-probability-theory.html" rel="nofollow" target="_blank" title="Share on Facebook"><i class="fa fa-facebook" style="color:#000000;vertical-align:middle;"></i></a>&ensp;
                <a href="https://plus.google.com/share?url=http://painblogr.org/2016-05-17-probability-theory.html" rel="nofollow" target="_blank" title="Share on Google+"><i class="fa fa-google-plus" style="color:#000000;vertical-align:middle;"></i></a>&ensp;
                <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://painblogr.org/2016-05-17-probability-theory.html" rel="nofollow" target="_blank" title="Share on LinkedIn"><i class="fa fa-linkedin" style="color:#000000;vertical-align:middle;"></i></a>
            </p>
        </div>

        <!-- Disqus -->
        <div class="comments">
            <hr>
            <h3>Comments</h3>
            <div id="disqus_thread"></div>
            <script>
                var disqus_config = function() {
                    this.page.url = 'http://painblogr.org/2016-05-17-probability-theory.html'
                    this.page.identifier = '/2016-05-17-probability-theory.html'
                };

                (function() {
                    var d = document,
                        s = d.createElement('script');

                    s.src = '//painblogr.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
            </noscript>
        </div>
    </div>

    <!-- Footer -->
    <footer>
         <!--footer-->
 <div class="container-fluid" id="foot" style="background-color:#FFFFFF;border-top:#CCCCCC solid 1px;color:#999999;font-family:'Open sans', 'Helvetica';">
     <div class="row">
         <div class="col-sm-4">
             <p>Hosted by: <a href="https://pages.github.com" target="_blank">GitHub Pages</a>
                 <br>Powered by: <a href="http://rmarkdown.rstudio.com/" target="_blank">RMarkdown</a>
                 <br>
                 <br>
             </p>
         </div>
         <div class="col-sm-4">
             <p>Fork/clone from: <a href="https://github.com/kamermanpr/kamermanpr.github.io.git" target="_blank">GitHub</a>
                 <br>License: <a href="./LICENSE.html" target="_blank">MIT & CC-BY 4.0</a>
                 <br>
                 <br>
             </p>
         </div>
         <div class="col-sm-4">
             <h4 style="padding:0;margin:0">painblogR</h3>
 			   <p style="display:inline-block">
 				   <span style="font-style:italic">by Peter Kamerman</span>
 				   &ensp;
 				   <a href="mailto:peter.kamerman@gmail.com" title="Email me" target="_blank"><i style="color:#999999;" class="fa fa-envelope"></i></a>
 				   &ensp;
 				   <a href="//twitter.com/@painblogR" target="_blank" title="Follow me"><i style="color:#999999;" class="fa fa-twitter"></i></a>
 			   </p>
 		   </div>
 	   </div>
 	</div> 
    </footer>
</body>

<!-- extras ------------------------------------------------------->
<!-- Mathjax -->

</html>
